CMake 是一个跨平台的构建工具，用于管理 C/C++ 项目的构建过程。它通过生成标准的构建文件（如 Makefile 或 Ninja 文件）来简化项目的构建和配置。CMake 的主要优势包括：

跨平台：CMake 可以在不同的操作系统上生成相应的构建文件，确保项目在不同平台上的可移植性。

管理复杂项目：CMake 支持多目录、多目标项目，能够轻松管理大型项目。

集成第三方库：通过 find_package 或 FetchContent，CMake 可以方便地集成第三方库。


## 配置cmake压缩包
下载地址: https://cmake.org/download/
下载版本: cmake-4.2.1-windows-x86_64.zip

解压之后配置环境变量
```
CMAKE_HOME: C:\Users\hasee\.cmake\cmake-4.2.1-windows-x86_64
PATH: %CMAKE_HOME%\bin
```

验证环境配置
```
cmake --version
```

## 构建工程
CMakeLists.txt 是 CMake 项目的核心配置文件，用于定义项目的构建规则, 同时用于生成Makefile文件

项目根目录创建CMakeLists.txt
```
cmake_minimum_required(VERSION 3.10.0)
project(cpp-practice VERSION 0.1.0 LANGUAGES C CXX)

# add_executable(cpp-practice src/main.cpp src/sum.cpp src/other.cpp)

#通过 aux_source_directory 收集指定目录下的所有源文件
# aux_source_directory(${CMAKE_CURRENT_SOURCE_DIR}/src SOURCES)
# add_executable(my_app ${SOURCES})

##通过 file(GLOB) 正则匹配目录中的源文件。
file(GLOB SOURCES "${CMAKE_CURRENT_SOURCE_DIR}/src/*.cpp")
add_executable(my_app ${SOURCES})

include(CTest)
enable_testing()

set(CMAKE_CXX_STANDARD 17)
set(CPACK_PROJECT_NAME ${PROJECT_NAME})
set(CPACK_PROJECT_VERSION ${PROJECT_VERSION})
include(CPack)
```
CMakeLists.txt语法如下:
- cmake_minimum_required：指定 CMake 的最低版本要求。
- project：定义项目名称。
- set(CMAKE_CXX_STANDARD 17)：设置 C++ 标准为 C++17。
- add_executable：定义可执行文件的生成规则。


CMake 支持多种构建工具，如 Makefile 和 Ninja。我们可以通过以下命令选择构建工具：
```
cmake -G "Unix Makefiles" <CMakeLists.txt 文件路径>
cmake -G "MinGW Makefiles" <CMakeLists.txt 文件路径>
```
提前在项目根目录下创建一个 build 目录, 用于生成cmake构建系统

这里我选择使用MinGW Makefiles构建工具
```
mkdir build
cd build
cmake -G "MinGW Makefiles" ..
```
执行成功后, build目录下会生辰CMakeCache.txt 以及 Makefile等文件

接下来, 还需要在 build 目录执行构建命令, 生成最终的可执行文件
```
cmake --build .
```

成功在build目录生成可执行文件my_app.exe

运行my_app.exe
```
.\my_app.exe
```



